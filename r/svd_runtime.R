# ------------------------------------------------------------------------------
# -- @head: MECAI | MAI5002 | SVD Execution Time -----------------------------
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# -- Clean ---------------------------------------------------------------------
# ------------------------------------------------------------------------------

rm(list=ls())
cat("\014")

# ------------------------------------------------------------------------------
# -- Variable ------------------------------------------------------------------
# ------------------------------------------------------------------------------

INPUT.PATH <- "../data/input/"
INPUT.FILE <- "svd_runtime.matlab.csv"

OUTPUT.PATH <- "../data/output/"
OUTPUT.FILE <- "svd_runtime.png"

# ------------------------------------------------------------------------------
# -- Library -------------------------------------------------------------------
# ------------------------------------------------------------------------------

source("svd.R")

if (!require("ggplot2")) {
  
  install.packages("ggplot2");
  library("ggplot2");
}

# ------------------------------------------------------------------------------
# -- Main ----------------------------------------------------------------------
# ------------------------------------------------------------------------------

set.seed(123)

# ----------------------------------------
# -- Runtime -----------------------------
# ----------------------------------------

matrix.size <- seq(from = 5, to = 100, by = 5);
svd.runtime <- matrix(0, nrow = length(matrix.size), ncol = 2);

for (i in 1:length(matrix.size)) {
  
  svd.runtime[i,1] <- matrix.size[i];
  
  for (j in 1:10) {
    
    random.matrix <- replicate(matrix.size[i], rnorm(matrix.size[i]));
    runtime.start <- Sys.time();
    SVD(cov(random.matrix), 1.e-5);
    svd.runtime[i,2] <- svd.runtime[i,2] + as.numeric(difftime(time1 = Sys.time(), time2 = runtime.start, units = "secs"));
    
  }
  
  svd.runtime[i,2] <- 0.1 * svd.runtime[i,2];
  
}

colnames(svd.runtime) <- c("size","runtime");
